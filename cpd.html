<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Jan 8, 2013
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20130108" />
    <meta http-equiv="Content-Language" content="en" />
    <title>MapDB - CPD Results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script src="js/jquery.min.js"></script>
                      
        
<script src="js/donate.js"></script>
                      
        
<script src="js/excanvas.js"></script>
                      
        
<script src="js/js-class.js"></script>
                      
        
<script src="js/bluff.js"></script>
          
            </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="http://github.com/JanKotek/MapDB">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                        
                    
                

    <div id="topbar" class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
                                  <div class="container"><div class="nav-collapse">
            
                
                                                                                <a class="brand" href="index.html"  title="MapDB">

                                
                                                                                                                    <img src="images/logo.png" alt="MapDB" />
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">MapDB <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="features.html"  title="Features">Features</a>
</li>
                  
                      <li>      <a href="faq.html"  title="Frequently Asked Questions">Frequently Asked Questions</a>
</li>
                  
                      <li>      <a href="future-ideas.html"  title="Future Ideas">Future Ideas</a>
</li>
                  
                      <li>      <a href="credits.html"  title="Credits">Credits</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="integration.html"  title="Continuous Integration">Continuous Integration</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                                  <li>      <a href="license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="distribution-management.html"  title="Distribution Management">Distribution Management</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                                  <li>      <a href="mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD Report">PMD Report</a>
</li>
                                  <li>      <a href="cpd.html"  title="CPD Report">CPD Report</a>
</li>
                                  <li>      <a href="findbugs.html"  title="FindBugs Report">FindBugs Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
                      <form id="search-form" action="http://www.google.com/search" method="get"  class="navbar-search pull-right" >
    
  <input value="www.mapdb.org" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
                                                              
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>MapDB</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
            
                  <li id="publishDate">Last Published: 2013-01-08</li>
                  <li class="divider">|</li> <li id="projectVersion">Version: 0.9-SNAPSHOT</li>
                      
                
            
      
                            </ul>
      </div>

      
                
        <div id="bodyColumn" >
                                  
            <div class="section"><h2>CPD Results<a name="CPD_Results"></a></h2><p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 4.3.</p></div><div class="section"><h2>Duplications<a name="Duplications"></a></h2><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/mapdb/Fun.java</td><td>128</td></tr><tr class="a"><td>org/mapdb/Fun.java</td><td>201</td></tr><tr class="b"><td colspan='2'><div><pre>            final Tuple3 oo = (Tuple3) o;
            if(a!=oo.a){
                if(a==null || oo.a==HI) return -1;
                if(a==HI ||  oo.a==null) return 1;

                final int c = ((Comparable)a).compareTo(oo.a);
                if(c!=0) return c;
            }

            if(b!=oo.b){
                if(b==null || oo.b==HI) return -1;
                if(b==HI || oo.b==null) return 1;

                final int i = ((Comparable)b).compareTo(oo.b);
                if(i!=0) return i;
            }

            if(c!=oo.c){
                if(c==null || oo.c==HI) return -1;
                if(c==HI || oo.c==null) return 1;

                final int i = ((Comparable)c).compareTo(oo.c);
                if(i!=0) return i;
            }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/mapdb/BTreeMap.java</td><td>905</td></tr><tr class="a"><td>org/mapdb/BTreeMap.java</td><td>954</td></tr><tr class="b"><td colspan='2'><div><pre>        if(key == null || oldValue == null || newValue == null ) throw new NullPointerException();

        long current = rootRecid.get();
        BNode node = engine.get(current, nodeSerializer);
        //dive until leaf is found
        while(!node.isLeaf()){
            current = nextDir((DirNode) node, key);
            node = engine.get(current, nodeSerializer);
        }

        nodeLocks.lock(current);
        LeafNode leaf = (LeafNode) engine.get(current, nodeSerializer);

        int pos = findChildren(key, node.keys());
        while(pos==leaf.keys.length){
            //follow leaf link until necessary
            nodeLocks.lock(leaf.next);
            nodeLocks.unlock(current);
            current = leaf.next;
            leaf = (LeafNode) engine.get(current, nodeSerializer);
            pos = findChildren(key, node.keys());
        }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="a"><th>File</th><th>Line</th></tr><tr class="b"><td>org/mapdb/Fun.java</td><td>71</td></tr><tr class="a"><td>org/mapdb/Fun.java</td><td>128</td></tr><tr class="b"><td>org/mapdb/Fun.java</td><td>201</td></tr><tr class="a"><td colspan='2'><div><pre>            final Tuple2 oo = (Tuple2) o;
            if(a!=oo.a){
                if(a==null || oo.a==HI) return -1;
                if(a==HI || oo.a==null) return 1;

                final int c = ((Comparable)a).compareTo(oo.a);
                if(c!=0) return c;
            }

            if(b!=oo.b){
                if(b==null || oo.b==HI) return -1;
                if(b==HI || oo.b==null) return 1;

                final int i = ((Comparable)b).compareTo(oo.b);
                if(i!=0) return i;
            }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/mapdb/BTreeMap.java</td><td>1356</td></tr><tr class="b"><td>org/mapdb/BTreeMap.java</td><td>1497</td></tr><tr class="a"><td colspan='2'><div><pre>                return ((BTreeMap.SubMap&lt;E,Object&gt;)m).keyIterator();
        }
        @Override
		public boolean equals(Object o) {
            if (o == this)
                return true;
            if (!(o instanceof Set))
                return false;
            Collection&lt;?&gt; c = (Collection&lt;?&gt;) o;
            try {
                return containsAll(c) &amp;&amp; c.containsAll(this);
            } catch (ClassCastException unused)   {
                return false;
            } catch (NullPointerException unused) {
                return false;
            }
        }
        @Override
		public Object[] toArray()     { return toList(this).toArray();  }
        @Override
		public &lt;T&gt; T[] toArray(T[] a) { return toList(this).toArray(a); }</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/mapdb/LongConcurrentLRUMap.java</td><td>653</td></tr><tr class="b"><td>org/mapdb/LongConcurrentLRUMap.java</td><td>681</td></tr><tr class="a"><td colspan='2'><div><pre>  public Map&lt;Long,V&gt; getOldestAccessedItems(int n) {
    Map&lt;Long,V&gt; result = new LinkedHashMap&lt;Long,V&gt;();
    if (n &lt;= 0)
      return result;
    TreeSet&lt;CacheEntry&lt;V&gt;&gt; tree = new TreeSet&lt;CacheEntry&lt;V&gt;&gt;();
    markAndSweepLock.lock();
    try {
        for( Iterator&lt;CacheEntry&lt;V&gt;&gt; iter = map.valuesIterator(); iter.hasNext();){
        CacheEntry&lt;V&gt; ce = iter.next();
        ce.lastAccessedCopy = ce.lastAccessed;
        if (tree.size() &lt; n) {
          tree.add(ce);
        } else {
          if (ce.lastAccessedCopy &lt; tree.first().lastAccessedCopy) {</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/mapdb/EncryptionXTEA.java</td><td>72</td></tr><tr class="b"><td>org/mapdb/EncryptionXTEA.java</td><td>95</td></tr><tr class="a"><td colspan='2'><div><pre>    private void encryptBlock(byte[] in, byte[] out, int off) {
        int y = (in[off] &lt;&lt; 24) | ((in[off+1] &amp; 255) &lt;&lt; 16) | ((in[off+2] &amp; 255) &lt;&lt; 8) | (in[off+3] &amp; 255);
        int z = (in[off+4] &lt;&lt; 24) | ((in[off+5] &amp; 255) &lt;&lt; 16) | ((in[off+6] &amp; 255) &lt;&lt; 8) | (in[off+7] &amp; 255);</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/mapdb/EncryptionXTEA.java</td><td>91</td></tr><tr class="b"><td>org/mapdb/EncryptionXTEA.java</td><td>114</td></tr><tr class="a"><td colspan='2'><div><pre>        out[off] = (byte) (y &gt;&gt; 24); out[off+1] = (byte) (y &gt;&gt; 16); out[off+2] = (byte) (y &gt;&gt; 8); out[off+3] = (byte) y;
        out[off+4] = (byte) (z &gt;&gt; 24); out[off+5] = (byte) (z &gt;&gt; 16); out[off+6] = (byte) (z &gt;&gt; 8); out[off+7] = (byte) z;
    }

    private void decryptBlock(byte[] in, byte[] out, int off) {</pre></div></td></tr></table><table border="0" class="table table-striped"><tr class="b"><th>File</th><th>Line</th></tr><tr class="a"><td>org/mapdb/BTreeMap.java</td><td>1018</td></tr><tr class="b"><td>org/mapdb/BTreeMap.java</td><td>1724</td></tr><tr class="a"><td colspan='2'><div><pre>    }


    @Override
    public Entry&lt;K, V&gt; pollFirstEntry() {
        while(true){
            Entry&lt;K, V&gt; e = firstEntry();
            if(e==null || remove(e.getKey(),e.getValue())){
                return e;
            }
        }
    }

    @Override
    public Entry&lt;K, V&gt; pollLastEntry() {
        while(true){
            Entry&lt;K, V&gt; e = lastEntry();
            if(e==null || remove(e.getKey(),e.getValue())){
                return e;
            }
        }
    }</pre></div></td></tr></table></div>
                  </div>
          </div>

    <hr/>

    <footer>
            <div class="container">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
            
      </div>

        
                <p id="poweredBy" class="pull-right">
                          <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
              </p>
        
                </div>
    </footer>
  </body>
</html>
